<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mejóralo · Comparativa</title>

  <style>
    :root{
      /* Brand */
      --brand-orange:#FF7900;
      --brand-white:#FFFFFF;
      --brand-black:#000000;

      /* UI */
      --ink:#1e2a2f;
      --muted:#7a8790;
      --line:#e8edf0;
      --shadow-soft:0 10px 30px rgba(0,0,0,.08);
    }

    /* ✅ Quitar márgenes de página en PDF */
    @page { size: A4; margin: 0; }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      background:var(--brand-white);
      color:var(--ink);
      font-family: "Dubai","Tw Cen MT","Segoe UI",system-ui,-apple-system,Arial,sans-serif;
    }

    /* ✅ Layout sin flex centrado (Prince-safe) */
    .page{
      padding: 16px 16px 18px; /* menos margen vertical */
    }
    .wrap{
      max-width: 940px;
      margin: 0 auto;
    }

    /* Logo */
    .brand{
      display:block;
      text-align:center;
      margin: 6px 0 10px;
    }
    .logo{
      width: 420px;
      height: 90px;
      margin: 0 auto;
      display:block;
    }
    .logo-img{
      max-width:100%;
      max-height:100%;
      width:auto;
      height:auto;
      display:block;
      object-fit:contain;
      margin: 0 auto;
    }

    /* ========= META (pills) ========= */
    .meta{
      margin: 8px auto 12px;
    }
    .meta > .pill + .pill{ margin-top: 10px; }

    /* ✅ Pill table layout (2 columnas estables) */
    .pill{
      background:linear-gradient(#f7f8fa, #eef1f4);
      border-radius:999px;
      padding:14px 0; /* padding vertical aquí; horizontal en celdas */
      box-shadow:0 10px 22px rgba(0,0,0,.08);
      overflow:hidden;

      display:table;
      width:100%;
      table-layout:fixed;
    }
    .pill-left,
    .pill-right{
      display:table-cell;
      width:50%;
      vertical-align:middle;
      white-space:nowrap;
    }
    .pill-left{
      padding: 0 18px;
      border-right:1px solid #dfe6ea; /* línea central */
    }
    .pill-right{
      padding: 0 18px;
    }

    /* Spacing robusto sin gap */
    .pill-left > *,
    .pill-right > *{
      display:inline-block;
      vertical-align:middle;
    }
    .pill-left > * + *{ margin-left:12px; }
    .pill-right > * + *{ margin-left:16px; }

    .pill .label{
      font-size:18px;
      font-weight:600;
      color:var(--ink);
      white-space:nowrap;
    }
    .divider{
      display:inline-block;
      width:1px;
      height:18px;
      background:#dfe6ea;
      opacity:.95;
      margin: 0 16px;
      vertical-align:middle;
    }

    /* ✅ Periodo opcional (si no hay fechas) */
    body[data-has-period="false"] #pillPeriodo .pill-left{ display:none; }
    body[data-has-period="false"] #pillPeriodo .pill-right{
      display:block;           /* ocupa todo */
      width:100%;
      padding:0 18px;
      text-align:center;
    }

    /* ========= SUMMARY ========= */
    .summary{
      position:relative;
      margin: 6px 0 10px;
    }

    /* ✅ Cards lado a lado con table (sin grid) */
    .cards{
      display:table;
      width:100%;
      table-layout:fixed;
      border-collapse:separate;
      border-spacing:14px 0; /* gap horizontal */
      margin:0;
    }
    .card{
      display:table-cell;
      width:50%;
      vertical-align:top;

      border-radius:18px;
      box-shadow:var(--shadow-soft);
      background:var(--brand-white);
      padding:20px 20px 26px; /* un poco más compacto */
      border:1px solid #eef2f5;

      text-align:center;
    }
    .card-title{
      font-weight:900;
      letter-spacing:.8px;
      text-transform:uppercase;
      color:var(--ink);
      font-size:18px;
      margin-bottom:10px;
    }
    .card-value{
      font-weight:900;
      font-size:62px;
      line-height:1;
      letter-spacing:-1px;
      white-space:nowrap; /* ✅ evita saltos */
    }
    .card--right{
      border:2px solid rgba(255,121,0,.35);
      background:linear-gradient(180deg, #fff7ef 0%, #fffaf6 100%);
    }

    /* ✅ Barra naranja sin flex/gap: inline-block + margin */
    .savings-bar{
      position:relative;
      z-index:3;

      background:var(--brand-orange);
      border-radius:999px;
      padding:14px 18px;
      box-shadow:0 14px 34px rgba(255,121,0,.35);

      text-transform:uppercase;
      color:var(--brand-white);
      letter-spacing:.6px;
      font-weight:900;

      margin: 0 10px 6px;
      transform: translateY(-18px); /* sube sobre cards (más estable que margin negativo en Prince) */

      text-align:center;
      white-space:nowrap; /* ✅ todo en la misma línea */
    }
    .savings-label,
    .savings-amount{
      display:inline-block;
      vertical-align:middle;
      white-space:nowrap;
    }
    .savings-label{ font-size:18px; opacity:.98; }
    .savings-amount{ font-size:38px; line-height:1; margin-left:14px; }

    .annual{
      text-align:center;
      font-weight:900;
      letter-spacing:.7px;
      text-transform:uppercase;
      color:var(--muted);
      font-size:16px;

      margin:0;
      transform: translateY(-10px);
    }
    .annual b{ color:var(--ink); }
    .annual .muted{ color:var(--muted); font-weight:900; }

    /* ========= DETAILS ========= */
    .details{
      margin-top:10px;
      padding:4px 6px 0;
    }
    .section{ margin:16px 0 10px; }

    /* Section head: sin gap */
    .section-head{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      padding:0 6px 6px;
    }
    .section-title{
      display:flex;
      align-items:center;
      font-size:22px;
      font-weight:1000;
      letter-spacing:.4px;
    }

    /* Cols head: table (sin grid) */
    .cols-head{
      display:table;
      border-collapse:separate;
      border-spacing:26px 0;
      color:#96a3ab;
      font-weight:1000;
      letter-spacing:.9px;
      text-transform:uppercase;
      font-size:14px;
      padding-right:4px;
    }
    .cols-head span{
      display:table-cell;
      width:120px;
      text-align:right;
    }

    .rows{
      border-top:1px solid var(--line);
      border-bottom:1px solid var(--line);
      background:linear-gradient(180deg, #ffffff 0%, #fbfcfd 100%);
      border-radius:14px;
      padding:0 12px;
    }

    /* Row sin gap */
    .row{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:14px 2px;
      border-bottom:1px solid var(--line);
    }
    .row:last-child{ border-bottom:none; }

    .row-left{ min-width:0; margin-right:16px; }
    .row-key{
      font-weight:1000;
      text-transform:uppercase;
      letter-spacing:.5px;
      margin-right:10px;
      white-space:nowrap;
    }
    .row-formula{
      color:#39474e;
      font-weight:700;
      letter-spacing:.2px;
      font-size:16px;
      white-space:nowrap;
    }

    /* Row-right: table (sin grid/gap) */
    .row-right{
      display:table;
      border-collapse:separate;
      border-spacing:26px 0;
      font-weight:1000;
      font-size:20px;
      letter-spacing:.2px;
      flex:0 0 auto;
    }
    .row-right > span{
      display:table-cell;
      width:120px;
      text-align:right;
      white-space:nowrap;
    }

    /* Energy rows: table (sin grid) */
    .rows--energy .row{
      display:table;
      width:100%;
      table-layout:fixed;
      padding:14px 2px;
    }
    .rows--energy .row > *{
      display:table-cell;
      vertical-align:middle;
    }
    .rows--energy .row .row-key{ width:70px; }
    .energy-mid{
      color:#39474e;
      font-weight:800;
      font-size:16px;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      padding-right:10px;
    }
    .energy-total{
      width:120px;
      text-align:right;
      font-weight:1000;
      font-size:20px;
      white-space:nowrap;
    }
    .pipe{
      opacity:.45;
      margin:0 10px;
    }

    /* Simple list rows */
    .rows--simple .row{
      display:flex;
      justify-content:space-between;
    }
    .simple-left{
      font-weight:900;
      text-transform:uppercase;
      letter-spacing:.5px;
      color:#39474e;
    }
    .simple-right{
      font-weight:1000;
      font-size:20px;
      white-space:nowrap;
    }

    /* Total */
    .total{
      margin:16px 6px 0;
      display:flex;
      justify-content:flex-end;
    }
    .total-box{
      width:min(520px, 100%);
      padding-top:10px;
      border-top:2px solid rgba(255,121,0,.55);
      display:flex;
      justify-content:flex-end;
      align-items:baseline;
      color:var(--brand-orange);
      font-weight:1000;
      text-transform:uppercase;
      letter-spacing:.9px;
      white-space:nowrap;
    }
    .total-box .amount{
      color:var(--ink);
      font-size:24px;
      letter-spacing:.2px;
      text-transform:none;
      margin-left:12px;
      white-space:nowrap;
    }

    /* Tramos: ocultar P2 y P3 */
    body[data-has-tramos="false"] #rowEP2,
    body[data-has-tramos="false"] #rowEP3{
      display:none;
    }
  </style>
</head>

<body class="page" data-has-period="true" data-has-tramos="true">
  <div class="wrap">

    <header class="brand">
      <div class="logo" aria-label="Mejóralo">
        <img class="logo-img" src="assets/logo_mejoralo_recortado.png" alt="mejoralo" />
      </div>
    </header>

    <section class="meta" aria-label="Datos del periodo y potencia">

      <div class="pill" id="pillPeriodo">
        <div class="pill-left">
          <span id="periodoGroup">
            <span class="label">Periodo:</span>
            <span class="redactable" id="periodo" style="--w:190px">19/10/2025 - 17/11/2025</span>
          </span>
        </div>
        <div class="pill-right">
          <span class="label">Días facturados:</span>
          <span class="redactable" id="diasFacturados" style="--w:44px">30</span>
        </div>
      </div>

      <div class="pill">
        <div class="pill-left">
          <span class="label">Potencia contratada</span>
        </div>
        <div class="pill-right">
          <span class="label">Punta</span>
          <span class="redactable" id="potenciaPunta" style="--w:86px">5,75 kW</span>
          <span class="divider" aria-hidden="true"></span>
          <span class="label">Valle</span>
          <span class="redactable" id="potenciaValle" style="--w:86px">5,75 kW</span>
        </div>
      </div>

    </section>

    <section class="summary" aria-label="Resumen comparativa">
      <div class="cards">
        <div class="card card--left">
          <div class="card-title">Factura actual</div>
          <div class="card-value">
            <span class="redactable big" id="facturaActual" style="--w:220px">119,78€</span>
          </div>
        </div>

        <div class="card card--right">
          <div class="card-title">Con esta tarifa</div>
          <div class="card-value">
            <span class="redactable big" id="facturaConTarifa" style="--w:200px">86,84€</span>
          </div>
        </div>
      </div>

      <div class="savings-bar" role="note" aria-label="Ahorro estimado en esta factura">
        <span class="savings-label">Ahorro estimado en esta factura</span>
        <span class="savings-amount redactable" id="ahorroFactura" style="--w:140px">32,94€</span>
      </div>

      <div class="annual">
        <span>Ahorro estimado anual </span>
        <b><span class="redactable" id="ahorroAnual" style="--w:140px">395,28€</span></b>
        <span class="muted"> (</span>
        <b><span class="redactable" id="ahorroPorcentaje" style="--w:72px">28%</span></b>
        <span class="muted">)</span>
      </div>
    </section>

    <section class="details" aria-label="Detalle de la tarifa">

      <!-- POTENCIA -->
      <div class="section">
        <div class="section-head">
          <div class="section-title"><span>POTENCIA</span></div>
          <div class="cols-head" aria-hidden="true">
            <span>Cantidad</span>
            <span>Precio</span>
          </div>
        </div>

        <div class="rows">
          <div class="row">
            <div class="row-left">
              <span class="row-key">P. Punta</span>
              <span class="row-formula">
                <span class="redactable" id="pPuntaKw" style="--w:54px">5,75</span> kW ×
                <span class="redactable" id="pPuntaDias" style="--w:44px">30</span> días ×
                <span class="redactable" id="pPuntaPrecioDia" style="--w:70px">0,108</span> €/kW día
              </span>
            </div>
            <div class="row-right">
              <span class="redactable" id="pPuntaCantidad" style="--w:92px">18,63€</span>
              <span class="redactable" id="pPuntaPrecio" style="--w:92px">18,63€</span>
            </div>
          </div>

          <div class="row">
            <div class="row-left">
              <span class="row-key">P. Valle</span>
              <span class="row-formula">
                <span class="redactable" id="pValleKw" style="--w:54px">5,75</span> kW ×
                <span class="redactable" id="pValleDias" style="--w:44px">30</span> días ×
                <span class="redactable" id="pVallePrecioDia" style="--w:70px">0,047</span> €/kW día
              </span>
            </div>
            <div class="row-right">
              <span class="redactable" id="pValleCantidad" style="--w:86px">7,76€</span>
              <span class="redactable" id="pVallePrecio" style="--w:86px">7,76€</span>
            </div>
          </div>
        </div>
      </div>

      <!-- ENERGÍA -->
      <div class="section">
        <div class="section-head">
          <div class="section-title"><span>ENERGÍA</span></div>
          <div class="cols-head" style="visibility:hidden" aria-hidden="true">
            <span>Cantidad</span><span>Precio</span>
          </div>
        </div>

        <div class="rows rows--energy">
          <div class="row">
            <div class="row-key">P1</div>
            <div class="energy-mid">
              <span class="redactable" id="eP1Kwh" style="--w:90px">366,67</span> kWh
              <span class="pipe">|</span>
              <span class="redactable" id="eP1Precio" style="--w:100px">0,187375</span> €/kWh
            </div>
            <div class="energy-total">
              <span class="redactable" id="eP1Total" style="--w:92px">68,77€</span>
            </div>
          </div>

          <div class="row" id="rowEP2">
            <div class="row-key">P2</div>
            <div class="energy-mid">
              <span class="redactable" id="eP2Kwh" style="--w:90px">327,94</span> kWh
              <span class="pipe">|</span>
              <span class="redactable" id="eP2Precio" style="--w:100px">0,187375</span> €/kWh
            </div>
            <div class="energy-total">
              <span class="redactable" id="eP2Total" style="--w:92px">61,42€</span>
            </div>
          </div>

          <div class="row" id="rowEP3">
            <div class="row-key">P3</div>
            <div class="energy-mid">
              <span class="redactable" id="eP3Kwh" style="--w:90px">450,74</span> kWh
              <span class="pipe">|</span>
              <span class="redactable" id="eP3Precio" style="--w:100px">0,187375</span> €/kWh
            </div>
            <div class="energy-total">
              <span class="redactable" id="eP3Total" style="--w:92px">84,47€</span>
            </div>
          </div>
        </div>
      </div>

      <!-- OTROS CONCEPTOS -->
      <div class="section">
        <div class="section-head">
          <div class="section-title"><span>OTROS CONCEPTOS</span></div>
          <div class="cols-head" style="visibility:hidden" aria-hidden="true">
            <span>Cantidad</span><span>Precio</span>
          </div>
        </div>

        <div class="rows rows--simple">
          <div class="row">
            <div class="simple-left">Bono social</div>
            <div class="simple-right"><span class="redactable" id="bonoSocial" style="--w:82px">0,37€</span></div>
          </div>
          <div class="row">
            <div class="simple-left">Alquiler de equipos</div>
            <div class="simple-right"><span class="redactable" id="alquilerEquipos" style="--w:82px">0,77€</span></div>
          </div>
        </div>
      </div>

      <!-- IMPUESTOS -->
      <div class="section">
        <div class="section-head">
          <div class="section-title"><span>IMPUESTOS</span></div>
          <div class="cols-head" style="visibility:hidden" aria-hidden="true">
            <span>Cantidad</span><span>Precio</span>
          </div>
        </div>

        <div class="rows rows--simple">
          <div class="row">
            <div class="simple-left">Imp. sobre la electricidad (5,113%)</div>
            <div class="simple-right"><span class="redactable" id="impElectricidad" style="--w:92px">4,57€</span></div>
          </div>
          <div class="row">
            <div class="simple-left">IVA (21%)</div>
            <div class="simple-right"><span class="redactable" id="iva" style="--w:92px">15,50€</span></div>
          </div>
        </div>
      </div>

      <div class="total" aria-label="Total con esta tarifa">
        <div class="total-box">
          <span>Total con esta tarifa</span>
          <span class="amount"><span class="redactable" id="totalConTarifa" style="--w:120px">86,84€</span></span>
        </div>
      </div>

    </section>

  </div>
</body>
</html>
